<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>知止堂</title>
        <link>http://comfluter.life/</link>
        <description>Recent content on 知止堂</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en</language>
        <lastBuildDate>Sun, 21 Nov 2021 00:00:00 +0000</lastBuildDate><atom:link href="http://comfluter.life/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>ToD-BERT 相关内容</title>
        <link>http://comfluter.life/p/tod-bert-%E7%9B%B8%E5%85%B3%E5%86%85%E5%AE%B9/</link>
        <pubDate>Sun, 21 Nov 2021 00:00:00 +0000</pubDate>
        
        <guid>http://comfluter.life/p/tod-bert-%E7%9B%B8%E5%85%B3%E5%86%85%E5%AE%B9/</guid>
        <description>&lt;h2 id=&#34;在服务器上运行tod-bert训练&#34;&gt;在服务器上运行ToD-BERT训练&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;进入服务器，激活环境&lt;code&gt;source activate todbert_env&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;进入/media/HD1/dche/ToD-BERT文件夹&lt;code&gt;cd /media/HD1/dche/ToD-BERT&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;查看GPU资源占用情况&lt;code&gt;nvidia-smi&lt;/code&gt;，然后选择目前占用情况较低的一张GPU进行训练即可&lt;/li&gt;
&lt;li&gt;运行训练shell脚本文件&lt;code&gt;CUDA_VISIBLE_DEVICES=0 ./run_tod_lm_pretraining.sh 0 bert bert-base-uncased save/pretrain/ToD-BERT-MLM --only_last_turn --data_path ./../dialog_datasets&lt;/code&gt;。根据第三步选择的几号卡，就把对应的0改成几，此处默认单卡训练。如果一切正常的话，再读入数据集数据后，就会开始训练了，有进度条出现就Ok了。常见的没跑起来的情况是CUDA out of memory。&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;tod-bert本地调用&#34;&gt;ToD-BERT本地调用&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;将ToD-BERT模型下载至本地&lt;/li&gt;
&lt;li&gt;包含ToD-BERT所需的python包，并定义模型路径
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;torch&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;transformers&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;BERT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;/home/andyliu/Desktop/Work/ToD-BERT/Models/ToD-BERT-mlm&amp;#39;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# &amp;lt;path_to_the_downloaded_tod-bert&amp;gt; 注意此处的路径要使用从根目录开始的绝对路径，而非从用户~目录开始的相对路径。&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;model_class&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tokenizer_class&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;config_class&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;BertModel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;BertTokenizer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;BertConfig&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;tokenizer&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tokenizer_class&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from_pretrained&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;BERT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;tod_bert&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;model_class&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from_pretrained&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;BERT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;使用ToD-BERT文档中的示例
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Encode text &lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;input_text&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;[CLS] [SYS] Hello, what can I help with you today? [USR] Find me a cheap restaurant nearby the north town.&amp;#34;&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;input_tokens&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tokenizer&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tokenize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input_text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;story&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;torch&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Tensor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tokenizer&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;convert_tokens_to_ids&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input_tokens&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;long&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;story&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; 
    &lt;span class=&#34;n&#34;&gt;story&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;story&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unsqueeze&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# batch size dimension&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;torch&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cuda&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;is_available&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt; 
    &lt;span class=&#34;n&#34;&gt;tod_bert&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tod_bert&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cuda&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;story&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;story&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cuda&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;torch&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;no_grad&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;input_context&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;input_ids&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;story&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;attention_mask&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;story&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;long&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()}&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;hiddens&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tod_bert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;**&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input_context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;计算tod-bert推理时间延迟&#34;&gt;计算ToD-BERT推理时间延迟&lt;/h2&gt;
&lt;h3 id=&#34;如何正确地计算&#34;&gt;如何正确地计算&lt;/h3&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.jianshu.com/p/9b9d6782f90b&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;深度学习中如何正确地measure inference time&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;问题：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;在进行多batch训练或推理的时候，batch1被送进GPU后，CPU由于异步执行，不再等待batch1在GPU内执行完毕，而是直接对batch2进行预处理，此时若使用python的time库，停止计算时间的代码将在GPU执行完毕前被执行，导致时长计算错误。&lt;/li&gt;
&lt;li&gt;GPU在不工作时将关掉许多硬件模块，在调用GPU时需要重新初始化（GPU预热），占用大量时间，导致时间测算错误。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;解决方法：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;在真正需要的example前运行几个example，使得GPU不再处于省电模式。&lt;/li&gt;
&lt;li&gt;使用&lt;code&gt;tr.cuda.event&lt;/code&gt;，在GPU上测量时间&lt;/li&gt;
&lt;li&gt;使用函数&lt;code&gt;torch.cuda.synchronize()&lt;/code&gt;，使得CPU和GPU工作在同步执行模式。&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>在Nginx服务器上部署SSL证书</title>
        <link>http://comfluter.life/p/%E5%9C%A8nginx%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E9%83%A8%E7%BD%B2ssl%E8%AF%81%E4%B9%A6/</link>
        <pubDate>Sun, 21 Nov 2021 00:00:00 +0000</pubDate>
        
        <guid>http://comfluter.life/p/%E5%9C%A8nginx%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E9%83%A8%E7%BD%B2ssl%E8%AF%81%E4%B9%A6/</guid>
        <description>&lt;h2 id=&#34;申请证书&#34;&gt;申请证书&lt;/h2&gt;
&lt;p&gt;在腾讯云SSL证书界面申请即可，过程很快，十分钟就通知证书申请成功。&lt;/p&gt;
&lt;h2 id=&#34;下载证书并上传至云服务器&#34;&gt;下载证书并上传至云服务器&lt;/h2&gt;
&lt;p&gt;在腾讯云SSL证书面板，找到要部署网站的证书，点击右侧的下载按钮即可下载&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 176; 
			flex-basis: 423px&#34;
	&gt;
	&lt;a href=&#34;http://comfluter.life/p/%E5%9C%A8nginx%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E9%83%A8%E7%BD%B2ssl%E8%AF%81%E4%B9%A6/1.jpg&#34; data-size=&#34;2736x1550&#34;&gt;
		&lt;img src=&#34;http://comfluter.life/p/%E5%9C%A8nginx%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E9%83%A8%E7%BD%B2ssl%E8%AF%81%E4%B9%A6/1.jpg&#34;
			width=&#34;2736&#34;
			height=&#34;1550&#34;
			srcset=&#34;http://comfluter.life/p/%E5%9C%A8nginx%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E9%83%A8%E7%BD%B2ssl%E8%AF%81%E4%B9%A6/1_huc70d1ace7178234db90a2009528b06e2_362037_480x0_resize_q75_box.jpg 480w, http://comfluter.life/p/%E5%9C%A8nginx%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E9%83%A8%E7%BD%B2ssl%E8%AF%81%E4%B9%A6/1_huc70d1ace7178234db90a2009528b06e2_362037_1024x0_resize_q75_box.jpg 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;SSL证书面板&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;SSL证书面板&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;zip包文件结构：&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 128; 
			flex-basis: 308px&#34;
	&gt;
	&lt;a href=&#34;http://comfluter.life/p/%E5%9C%A8nginx%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E9%83%A8%E7%BD%B2ssl%E8%AF%81%E4%B9%A6/2.jpg&#34; data-size=&#34;342x266&#34;&gt;
		&lt;img src=&#34;http://comfluter.life/p/%E5%9C%A8nginx%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E9%83%A8%E7%BD%B2ssl%E8%AF%81%E4%B9%A6/2.jpg&#34;
			width=&#34;342&#34;
			height=&#34;266&#34;
			srcset=&#34;http://comfluter.life/p/%E5%9C%A8nginx%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E9%83%A8%E7%BD%B2ssl%E8%AF%81%E4%B9%A6/2_hua5d80ebc9a0a7e639306a0621ea97d51_18720_480x0_resize_q75_box.jpg 480w, http://comfluter.life/p/%E5%9C%A8nginx%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E9%83%A8%E7%BD%B2ssl%E8%AF%81%E4%B9%A6/2_hua5d80ebc9a0a7e639306a0621ea97d51_18720_1024x0_resize_q75_box.jpg 1024w&#34;
			loading=&#34;lazy&#34;
			alt=&#34;zip_struct&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;zip_struct&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;由于使用Nginx服务器，需要使用的文件全部放在Nginx文件夹下：&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 397; 
			flex-basis: 954px&#34;
	&gt;
	&lt;a href=&#34;http://comfluter.life/p/%E5%9C%A8nginx%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E9%83%A8%E7%BD%B2ssl%E8%AF%81%E4%B9%A6/3.jpg&#34; data-size=&#34;366x92&#34;&gt;
		&lt;img src=&#34;http://comfluter.life/p/%E5%9C%A8nginx%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E9%83%A8%E7%BD%B2ssl%E8%AF%81%E4%B9%A6/3.jpg&#34;
			width=&#34;366&#34;
			height=&#34;92&#34;
			srcset=&#34;http://comfluter.life/p/%E5%9C%A8nginx%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E9%83%A8%E7%BD%B2ssl%E8%AF%81%E4%B9%A6/3_huaec6fc8956754b71ff02d1c9284335d0_10544_480x0_resize_q75_box.jpg 480w, http://comfluter.life/p/%E5%9C%A8nginx%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E9%83%A8%E7%BD%B2ssl%E8%AF%81%E4%B9%A6/3_huaec6fc8956754b71ff02d1c9284335d0_10544_1024x0_resize_q75_box.jpg 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;将这两个文件复制到服务器Nginx安装路径下，我服务器上的安装路径为&lt;code&gt;/etc/nginx&lt;/code&gt;：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;root@VM-24-3-ubuntu:/# mv /home/ubuntu/download/1_comfluter.life_bundle.crt /etc/nginx
root@VM-24-3-ubuntu:/# mv /home/ubuntu/download/2_comfluter.life.key /etc/nginx
root@VM-24-3-ubuntu:/# &lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; /etc/nginx
root@VM-24-3-ubuntu:/etc/nginx# ll -s
total &lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;
&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; drwxr-xr-x   &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; root   root   &lt;span class=&#34;m&#34;&gt;4096&lt;/span&gt; Nov &lt;span class=&#34;m&#34;&gt;21&lt;/span&gt; 10:05 ./
&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; drwxr-xr-x &lt;span class=&#34;m&#34;&gt;115&lt;/span&gt; root   root   &lt;span class=&#34;m&#34;&gt;4096&lt;/span&gt; Nov &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt; 15:50 ../
&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; -rw-rw-r--   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; ubuntu ubuntu &lt;span class=&#34;m&#34;&gt;3921&lt;/span&gt; Nov &lt;span class=&#34;m&#34;&gt;21&lt;/span&gt; 08:37 1_comfluter.life_bundle.crt
&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; -rw-rw-r--   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; ubuntu ubuntu &lt;span class=&#34;m&#34;&gt;1700&lt;/span&gt; Nov &lt;span class=&#34;m&#34;&gt;21&lt;/span&gt; 08:37 2_comfluter.life.key
&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; drwxr-xr-x   &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; root   root   &lt;span class=&#34;m&#34;&gt;4096&lt;/span&gt; Nov &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt; 16:48 conf.d/
&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; -rw-r--r--   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; root   root   &lt;span class=&#34;m&#34;&gt;1077&lt;/span&gt; Feb  &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;  &lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt; fastcgi.conf
&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; -rw-r--r--   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; root   root   &lt;span class=&#34;m&#34;&gt;1007&lt;/span&gt; Feb  &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;  &lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt; fastcgi_params
&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; -rw-r--r--   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; root   root   &lt;span class=&#34;m&#34;&gt;2837&lt;/span&gt; Feb  &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;  &lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt; koi-utf
&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; -rw-r--r--   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; root   root   &lt;span class=&#34;m&#34;&gt;2223&lt;/span&gt; Feb  &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;  &lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt; koi-win
&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; -rw-r--r--   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; root   root   &lt;span class=&#34;m&#34;&gt;3957&lt;/span&gt; Feb  &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;  &lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt; mime.types
&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; drwxr-xr-x   &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; root   root   &lt;span class=&#34;m&#34;&gt;4096&lt;/span&gt; May &lt;span class=&#34;m&#34;&gt;26&lt;/span&gt; 01:10 modules-available/
&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; drwxr-xr-x   &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; root   root   &lt;span class=&#34;m&#34;&gt;4096&lt;/span&gt; Nov &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt; 15:50 modules-enabled/
&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; -rw-r--r--   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; root   root   &lt;span class=&#34;m&#34;&gt;1512&lt;/span&gt; Nov &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt; 16:53 nginx.conf
&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; -rw-r--r--   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; root   root    &lt;span class=&#34;m&#34;&gt;180&lt;/span&gt; Feb  &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;  &lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt; proxy_params
&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; -rw-r--r--   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; root   root    &lt;span class=&#34;m&#34;&gt;636&lt;/span&gt; Feb  &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;  &lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt; scgi_params
&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; drwxr-xr-x   &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; root   root   &lt;span class=&#34;m&#34;&gt;4096&lt;/span&gt; Nov &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt; 16:40 sites-available/
&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; drwxr-xr-x   &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; root   root   &lt;span class=&#34;m&#34;&gt;4096&lt;/span&gt; Nov &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt; 16:48 sites-enabled/
&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; drwxr-xr-x   &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; root   root   &lt;span class=&#34;m&#34;&gt;4096&lt;/span&gt; Nov &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt; 15:50 snippets/
&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; -rw-r--r--   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; root   root    &lt;span class=&#34;m&#34;&gt;664&lt;/span&gt; Feb  &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;  &lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt; uwsgi_params
&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; -rw-r--r--   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; root   root   &lt;span class=&#34;m&#34;&gt;3071&lt;/span&gt; Feb  &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;  &lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt; win-utf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;编辑nginx服务器配置&#34;&gt;编辑Nginx服务器配置&lt;/h2&gt;
&lt;p&gt;更改&lt;code&gt;/etc/nginx/sites-enabled&lt;/code&gt;下服务器配置文件：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;server {
    listen 443 ssl;
    #填写绑定证书的域名
    server_name comfluter.life; 
    #证书文件名称
    ssl_certificate  1_comfluter.life_bundle.crt; 
    #私钥文件名称
    ssl_certificate_key 2_comfluter.life.key; 
    ssl_session_timeout 5m;
    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;
    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
    ssl_prefer_server_ciphers on;
    location / {
            #网站主页路径。此路径仅供参考，具体请您按照实际目录操作。 
            #例如，您的网站运行目录在/etc/www下，则填写/etc/www。
        root /home/ubuntu/www/Blogs/Personal;
        index index.html index.htm;
    }
}
server {
    listen 80;
    #填写绑定证书的域名
    server_name comfluter.life; 
    #把http的域名请求转成https
    return 301 https://$host$request_uri; 
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;配置中前半部分为https网页服务，后半部分为将http请求重定向至https请求&lt;/p&gt;
&lt;p&gt;验证配置文件：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;root@VM-24-3-ubuntu:/etc/nginx# nginx -t
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf &lt;span class=&#34;nb&#34;&gt;test&lt;/span&gt; is successful
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;重启Nginx服务器：&lt;code&gt;nginx -s reload&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;https访问&#34;&gt;https访问！&lt;/h2&gt;
&lt;p&gt;此时输入&lt;code&gt;comfluter.life&lt;/code&gt;访问时即可看到已经是https连接&lt;/p&gt;
&lt;p&gt;&lt;figure 
	
		class=&#34;gallery-image&#34; 
		style=&#34;
			flex-grow: 657; 
			flex-basis: 1577px&#34;
	&gt;
	&lt;a href=&#34;http://comfluter.life/p/%E5%9C%A8nginx%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E9%83%A8%E7%BD%B2ssl%E8%AF%81%E4%B9%A6/4.jpg&#34; data-size=&#34;368x56&#34;&gt;
		&lt;img src=&#34;http://comfluter.life/p/%E5%9C%A8nginx%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E9%83%A8%E7%BD%B2ssl%E8%AF%81%E4%B9%A6/4.jpg&#34;
			width=&#34;368&#34;
			height=&#34;56&#34;
			srcset=&#34;http://comfluter.life/p/%E5%9C%A8nginx%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E9%83%A8%E7%BD%B2ssl%E8%AF%81%E4%B9%A6/4_hud9da19d6fc0e32acb5a778f763005686_6410_480x0_resize_q75_box.jpg 480w, http://comfluter.life/p/%E5%9C%A8nginx%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E9%83%A8%E7%BD%B2ssl%E8%AF%81%E4%B9%A6/4_hud9da19d6fc0e32acb5a778f763005686_6410_1024x0_resize_q75_box.jpg 1024w&#34;
			loading=&#34;lazy&#34;
			&gt;
	&lt;/a&gt;
	
&lt;/figure&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Hello, World!</title>
        <link>http://comfluter.life/p/hello-world/</link>
        <pubDate>Fri, 19 Nov 2021 00:00:00 +0000</pubDate>
        
        <guid>http://comfluter.life/p/hello-world/</guid>
        <description>&lt;img src="http://comfluter.life/p/hello-world/cover.jpg" alt="Featured image of post Hello, World!" /&gt;&lt;h2 id=&#34;序言&#34;&gt;序言&lt;/h2&gt;
&lt;p&gt;在经历许许多多的学习、配置、折腾之后，终于在今天配置好了自己的个人博客。&lt;/p&gt;
&lt;p&gt;在朋友圈、微博盛行的当下，个人博客的风头已过，好像已经是上一个时代的产物了。那么究竟又是什么让我在建站的过程中即使遇到了层层困难，也坚定不移地搭起来这个博客呢？&lt;/p&gt;
&lt;p&gt;第一方面，感觉自己还是需要一个记录与对外表达的窗口。朋友圈等等社交网络固然可以，但是于我来讲似乎显得喧闹了些。我期待的表达，不是浮于表面的事件记录与短暂的情感宣泄。静下心来记录自己成长变化、各阶段真实想法与所思所得才是我我之所需。而这些想法，有时又期待能随时随地回顾，或是与志同道合之人分享。因此介于朋友圈、微博等社交平台与传统纸笔日记之间的个人博客似乎是个不错的选择。从半年前看到王凯师兄的博客便觉心动，到现在终于有了属于自己的一方空间。&lt;/p&gt;
&lt;p&gt;此外，也是最近在学习计算机网络的相关课程。从之前分不清HTTP、URL、TCP等等名词之间的关系的状态一步步地了解了网络的各个方面，而因为课程设计原因深感实践不足。云服务器的配置、连接、博客的搭建与部署、域名的申请与域名解析配置等等正好为动手实践课程内容提供了一个极佳的机会。在搭建服务器、部署博客的过程中也确实不断地将课本中抽象的知识落到实处。&lt;/p&gt;
&lt;p&gt;最后，可能也是最近受龄的影响，觉得自己不能再一天天想着GPA就惶惶不可终日。成天担心对成绩的影响而束手束脚，投入了过多不必要的时间在课业的细枝末节上，生怕漏掉一小点就会有多么大的影响。现在我觉得比较好的态度是：应该投入的时间，我保证投入。除此之外，偶然性是必然有的，考试中等等可能出现的意外情况、偏门的微末之处，实在无必要，也无意义为了它们投入大量的时间。投入了，也不能保证最后的结果。与其如此，正如闫锋老师说的，不如让自己真正做点实在的事出来，在实践中学习，在实践中收获，在主动地做事情的过程当中发挥自己心灵的能动性，让自己过得由己、恣肆、多彩一些。&lt;/p&gt;
&lt;p&gt;因此，也希望这个博客在记录我个人所思所想以外，能够带动我走出一天天为了成绩而焦虑的状态之中，真正地敢于放手去做自己喜欢的事，也才真正能做成自己喜欢的事。&lt;/p&gt;
&lt;h2 id=&#34;建站小记&#34;&gt;建站小记&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;21.11.05 购买腾讯云服务器、购买域名&lt;code&gt;comfluter.life&lt;/code&gt;，熟悉linux服务器操作与hugo工具基本使用&lt;/li&gt;
&lt;li&gt;21.11.13 在询问完王凯师兄hugo博客部署方法以后，学习hugo模板使用与博客搭建、github使用、github actions + 云服务器自动部署。但是卡在了最后一步Nginx服务器配置，使得服务器端页面一直显示404。&lt;/li&gt;
&lt;li&gt;21.11.15 由于Nginx服务器的问题，以及之前摸索阶段各种误操作，决定直接重置腾讯云服务器，将服务器端的功能重新搭建。完成服务器基本设置后激活root账户并配置ssh登录信息，重写了github pages，安装Nginx，以root账户运行，配置Nginx。&lt;/li&gt;
&lt;li&gt;21.11.19 由于使用主题时采用了&lt;code&gt;git submodule&lt;/code&gt;的方式，而github同步时不同步submodule导致各种错误，重新使用&lt;code&gt;git clone&lt;/code&gt;方式引入了主题，重新搭建了博客与github repo，并配置github actions。&lt;/li&gt;
&lt;li&gt;21.11.19 解决github actions css无法加载问题，使用&lt;code&gt;git submodule&lt;/code&gt;直接推送到github pages，但发现问题仍然存在。最终确定问题在baseURL上，改好后部署。&lt;/li&gt;
&lt;li&gt;21.11.19 写下这篇hello world文档。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;动手去做一个项目确实是学习的高效方法。通过搭建博客，至少熟悉了以下内容：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;云服务器&lt;/li&gt;
&lt;li&gt;Linux命令行&lt;/li&gt;
&lt;li&gt;git命令行操作&lt;/li&gt;
&lt;li&gt;git submodule&lt;/li&gt;
&lt;li&gt;github全流程&lt;/li&gt;
&lt;li&gt;github pages&lt;/li&gt;
&lt;li&gt;github actions&lt;/li&gt;
&lt;li&gt;hugo使用&lt;/li&gt;
&lt;li&gt;域名配置与域名解析&lt;/li&gt;
&lt;li&gt;防火墙配置&lt;/li&gt;
&lt;li&gt;Nginx服务器搭建&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;其中许多是以前多次觉得应该去做，而没多久又半途而废的。放弃的理由大概是陷入极多的知识内容而毫无方向，也就失去了学习的意义，但为了一个目标去做，许多事情就顺理成章了。&lt;/p&gt;
&lt;p&gt;希望以后能以更多项目为依托，让自己不断学习、进步。&lt;/p&gt;
&lt;h2 id=&#34;link&#34;&gt;link&lt;/h2&gt;
&lt;p&gt;built with hugo and using theme &amp;ldquo;Stack&amp;rdquo;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.stack.jimmycai.com/zh/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Stack Chinese documentation&lt;/a&gt;
&lt;a class=&#34;link&#34; href=&#34;https://tablericons.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;icons&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
